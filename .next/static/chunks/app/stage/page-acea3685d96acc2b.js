(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[699],{3560:(e,s,i)=>{Promise.resolve().then(i.bind(i,5943))},5943:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>n});var l=i(5155),t=i(2115);function n(){var e,s,i,n;let[r,a]=(0,t.useState)(null),[o,c]=(0,t.useState)([]),[h,p]=(0,t.useState)([]),[x,u]=(0,t.useState)([]),[j,g]=(0,t.useState)("live");(0,t.useEffect)(()=>{let e=async()=>{let[e,s,i,l]=await Promise.all([fetch("/api/stage/summary").then(e=>e.json()),fetch("/api/stage/agents").then(e=>e.json()),fetch("/api/stage/events?limit=100").then(e=>e.json()),fetch("/api/stage/tasks?limit=100").then(e=>e.json())]);e.ok&&a(e.data),s.ok&&c(s.data),i.ok&&p(i.data),l.ok&&u(l.data)};e();let s=setInterval(e,3e4);return()=>clearInterval(s)},[]);let v=(0,t.useMemo)(()=>h.slice(0,50),[h]);return(0,l.jsxs)("main",{style:{padding:24,fontFamily:"Inter, system-ui, sans-serif",color:"#e5e7eb",background:"#0b1020",minHeight:"100vh"},children:[(0,l.jsx)("h1",{style:{fontSize:36,marginBottom:8},children:"The Stage"}),(0,l.jsxs)("div",{style:{display:"flex",gap:16,marginBottom:18},children:[(0,l.jsx)(d,{label:"MSN",value:null!=(e=null==r?void 0:r.missions)?e:0}),(0,l.jsx)(d,{label:"PRP",value:null!=(s=null==r?void 0:r.proposals)?s:0}),(0,l.jsx)(d,{label:"DPL",value:null!=(i=null==r?void 0:r.deploys)?i:0}),(0,l.jsx)(d,{label:"INS",value:null!=(n=null==r?void 0:r.insights)?n:0})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:16},children:[(0,l.jsx)("button",{onClick:()=>g("live"),children:"Live Feed"}),(0,l.jsx)("button",{onClick:()=>g("tasks"),children:"Tasks"}),(0,l.jsx)("button",{onClick:()=>g("social"),children:"Social"})]}),(0,l.jsxs)("section",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:20},children:[(0,l.jsxs)("div",{style:{border:"1px solid #334155",borderRadius:12,padding:12},children:[(0,l.jsx)("h3",{children:"Agents"}),o.map(e=>(0,l.jsxs)("div",{style:{borderTop:"1px solid #1f2937",paddingTop:10,marginTop:10},children:[(0,l.jsx)("strong",{children:e.id})," \xb7 ",e.role,(0,l.jsxs)("div",{style:{fontSize:12,opacity:.9},children:[e.model," \xb7 affect: ",e.affect]}),(0,l.jsx)("div",{style:{fontSize:13},children:e.statusLine})]},e.id))]}),(0,l.jsxs)("div",{style:{border:"1px solid #334155",borderRadius:12,padding:12},children:["live"===j&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h3",{children:"Live event feed"}),v.map(e=>(0,l.jsxs)("div",{style:{borderTop:"1px solid #1f2937",padding:"8px 0"},children:[(0,l.jsxs)("div",{style:{fontSize:12,opacity:.8},children:[new Date(e.timestamp).toLocaleString()," \xb7 ",e.actor," \xb7 ",e.type]}),(0,l.jsx)("div",{children:(0,l.jsx)("strong",{children:e.title})}),e.summary&&(0,l.jsx)("div",{children:e.summary}),e.relation&&(0,l.jsx)("div",{style:{fontSize:12,opacity:.8},children:e.relation})]},e.id))]}),"tasks"===j&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h3",{children:"Tasks"}),x.map(e=>(0,l.jsxs)("div",{style:{borderTop:"1px solid #1f2937",padding:"8px 0"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:e.title})," \xb7 ",e.status]}),(0,l.jsxs)("div",{style:{fontSize:12,opacity:.8},children:["queued ",e.progress.queued," \xb7 running ",e.progress.running," \xb7 done ",e.progress.succeeded," \xb7 failed ",e.progress.failed]})]},e.id))]}),"social"===j&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h3",{children:"Social"}),h.filter(e=>e.title.toLowerCase().includes("tweet")).slice(0,30).map(e=>(0,l.jsxs)("div",{style:{borderTop:"1px solid #1f2937",padding:"8px 0"},children:[(0,l.jsx)("div",{children:(0,l.jsx)("strong",{children:e.title})}),(0,l.jsx)("div",{children:e.summary})]},e.id))]})]})]})]})}function d(e){let{label:s,value:i}=e;return(0,l.jsxs)("div",{style:{border:"1px solid #334155",borderRadius:10,padding:"8px 12px",minWidth:82},children:[(0,l.jsx)("div",{style:{fontSize:11,opacity:.8},children:s}),(0,l.jsx)("div",{style:{fontSize:20,fontWeight:700},children:i})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=3560)),_N_E=e.O()}]);